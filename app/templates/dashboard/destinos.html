{% extends 'layout.html' %}
{% block title %}Gestión de Destinos{% endblock %}

{% block content %}
<h3 class="mb-3">🌍 Lista de Destinos</h3>

{# Solo el administrador puede agregar nuevos destinos #}
{% if session.get('role') == 'admin' %}
  <a href="{{ url_for('destination.add_destination') }}" class="btn btn-primary mb-3">➕ Agregar Nuevo Destino</a>
{% endif %}

<table class="table table-bordered table-striped align-middle shadow-sm">
  <thead class="table-dark text-center">
    <tr>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Actividades</th>
      <th>Costo</th>
      {% if session.get('role') == 'admin' %}
        <th>Acciones</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    {% for d in destinos %}
    <tr>
      <td>{{ d.nombre }}</td>
      <td>{{ d.descripcion }}</td>
      <td>{{ d.actividades }}</td>
      <td>${{ "%.2f"|format(d.costo) }}</td>

      {% if session.get('role') == 'admin' %}
      <td class="text-center">
        <a href="{{ url_for('destination.edit_destination', id=d.id) }}" class="btn btn-warning btn-sm me-1">✏️ Editar</a>
        <a href="{{ url_for('destination.delete_destination', id=d.id) }}" class="btn btn-danger btn-sm"
           onclick="return confirm('¿Estás seguro de eliminar este destino?')">🗑️ Eliminar</a>
      </td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>

{% if not destinos %}
  <div class="alert alert-info mt-3">No hay destinos registrados todavía.</div>
{% endif %}
{% endblock %}